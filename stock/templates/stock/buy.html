{% extends "base.html" %}
{% block title %}Buy{% endblock %}
{% block content %}
<div class="card container mt-5">



    <div class="card-header">
        <h5 class="card-title text-center">Buy {{stock.name}}</h5>

    </div>
    <div class="card-body">
        {% if error %}
        <p style="color:red; text-align:center; text-transform: capitalize">{{ error }}</p>
        <br>

        {% endif %}

        <form action="{% url 'buy_done' %}" method="POST">
            {% csrf_token %}
            <label for="">Stock</label>
            <input type="text" name="s_name" id="" value="{{ stock.name}}" readonly>
            <input type="hidden" name="user_id" value="{{ user.id }}">
            <input type="hidden" name="stock_id" value="{{stock.id}}">
            <label for="">Price</label>
            <input type="number" name="s_price" id="price" value="{{ stock.price }}" readonly>
            <label for="">Share</label>
            <select class='form-control' name="share" id="share" onchange="tot()">
                <option value="1" selected>1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
            <label for="">Total: <span id="result"></span></label>
            <input type="submit" class="mt-3" name="" id="" class="btn btn-success">
        </form>
    </div>
</div>

<script>
    function tot() {
        let price = document.getElementById('price').value;
        let share = document.getElementById('share').value;
        share_total = parseFloat(price) * parseFloat(share)
        document.getElementById('result').innerHTML = share_total.toFixed(2);
    }
</script>
{% endblock %}